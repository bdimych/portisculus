-----
общее

делаю в цигвине в xterm
в уме вспоминаю linux



-----
требования
	-ruby
		-библиотека ruby-mp3info - чтобы вынимать длину mp3 и отфильтровывать слишком длинные песни (бывают миксы на час и больше)
	-soundstretch
		собственно главная задача - определять/менять bpm
		умеет только wav поэтому надо декодировать lame
	-lame
		декодировать mp3->wav
	-mplayer
		если soundstretch не определил или определил неправильно,
		то можно посчитать вручную: mplayer играет, юзер пробелом стучит, скрипт считает нажатия
	
	
	

	
-----
1-create-bpm-database.rb

самое первое что вообще нужно сделать это создать текстовый файл и построчно записать пути к каталогам с музыкой
потом запустить ./1-create-bpm-database.rb bpm-db.txt

скрипт найдёт *.mp3 файлы и попробует определить bpm
если автоматом неполучится, то предложит послушать и посчитать вручную

остановить - Ctrl-C

приёмы:
	-чтобы пересчитать - ????
	-чтобы пересчитать вручную - удалить bpm
		soundstretch достаточно часто определяет половинный или даже четвертьной bpm т.е. вместо 160 может получиться 80 или 40
		с другой стороны бывает что действительно основной ритм небыстрый но за один удар можно сделать два шага
		




-----
база

просто текстовый файл построчно
/путь/каталог/
[флаг] /путь/файл.mp3: bpm
[флаг] /путь/файл.mp3: bpm

флаг:
"+" - лучшая песня
"-" - пропускать (песня не нравится или например дубль)
"=" - чёткого размеренного ритма нет или слишком медленная, но не пропускать её а копировать как есть
	(например вступление на альбом или просто хорошая песня отдышаться)




-----
2-fill-player.rb

заполняет плеер
алгоритм:
???

остановить - Ctrl-C









	
